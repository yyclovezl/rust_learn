# 集合

集合是一种数据结构.可以包含多个值.集合指向的数据存储在堆上,意味着数据的数量不必在编译时知道(但必须知道数据类型).并且可在程序运行时增加或减少.主要介绍3中集合:

- 向量 vector 允许可变数量的值彼此相邻存储
- 字符串
- 哈希 map (hash map) 哈希映射允许将值和特定键关联

## 使用 Vector 存储列表

vector 只能存储一种数据类型,多个值. 值在内存中相邻排列.

只能存储同类型值.

### 建立vector

`let v: Vec<i32> = Vec::new();`

vector 用泛型实现的, 所以可以存放任何类型,而当存放指定类型时,就需要使用尖括号了.

但如果我们存放数据类型都相同的时候,有个简单方法,使用`vec!`宏 :`let v = vec![1, 2, 3];`

### 更新 vector

```rust
let mut v = Vec::new();

v.push(5);
v.push(6);
v.push(7);
v.push(8);
```

### 读取vector

2个方式 : 通过索引 或 get方法

下面例子分别使用2种方式读取数据:

```rust
let v = vec![1, 2, 3, 4, 5];

let third: &i32 = &v[2];
println!("The third element is {third}");

let third: Option<&i32> = v.get(2);
match third {
    Some(third) => println!("The third element is {third}"),
    None => println!("There is no third element."),
}
```

2个方法有少许区别:

- 调用get方法,会得到一个用于`match`的`Option<&T>`
- 当当提取范围超出了目标范围,返回的信息也是不同的
  - 第一个方法将直接崩溃
  - 第二个方法get则会返回None,  2种方式取决于程序设计需求

向量某一个元素被引用,此时向量不能新增元素:

```rust
    let mut v = vec![1, 2, 3, 4, 5];

    let first = &v[0];

    v.push(6);

    println!("The first element is: {first}");
```

上面程序将崩溃, 原因: vector的工作方式是当vector的尾部增加新元素时,如果没有足够空间将所有元素依次相邻放下的情况时,可能会要求重新分配内存,并将老元素拷贝到新空间,此时那个被使用的元素的引用将指向被释放的内存.

### 遍历vector

除了通过索引,还能使用for

```rust
let v = vec![100, 32, 57];
for i in &v {
    println!("{i}");
}

let mut v = vec![100, 32, 57];
for i in &mut v {
    *i += 50;
}
```

### 和枚举配合

vector只能存储一种数据类型, 而枚举可以存储不同类型数据,那么2者结合:

```rust
enum SpreadsheetCell {
    Int(i32),
    Float(f64),
    Text(String),
}

let row = vec![
    SpreadsheetCell::Int(3),
    SpreadsheetCell::Text(String::from("blue")),
    SpreadsheetCell::Float(10.12),
];
```

提问:那么为什么不直接使用枚举,而非要通过2者配合呢,它的适用场景是什么? (待)

vector离开作用域时,汇丢弃所有元素

## 使用字符串存储 UTF-8 编码的文本

这节将更深入了解字符串

字符串 = 字节的集合 + 一些方法.

Rust的核心语言中只有一种字符串类型 即 字符串切片`str`,常以引用形式出现`&str`

`String`类型是Rust的标准库提供的,不是编码到核心语言中. 是一个可增长、可变,有用UTF-8编码的字符串类型.

要分清`str`和`String`

### 创建新字符串

- `let mut s = String::new();`  创建了一个空的字符串.

- 使用`to_string`方法通过字符串字面值创建一个`String`

    ```rust
        let data = "initial contents";

        let s = data.to_string();

        // 该方法也可直接用于字符串字面值：
        let s = "initial contents".to_string();
    ```






## 使用 Hash Map 存储键值对
